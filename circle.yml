machine:
  environment:
    GHC_VERSION: 7.10.1
    PATH: /opt/ghc/${GHC_VERSION}/bin:/opt/cabal/1.22/bin:${PATH}

checkout:
  pre:
    - ls -alFh /opt
  post:
    - git submodule sync
    - git submodule update --init

dependencies:
  pre:
   - sudo add-apt-repository -y ppa:hvr/ghc
   - sudo apt-get update
   - sudo apt-get install cabal-install-1.22 ghc-${GHC_VERSION}

deployment:
  production:
    branch: master
    commands:
      - git config --global user.name "CircleCI for Steven Shaw"
      - git config --global user.email "steven@steshaw.org"
      - ./floop

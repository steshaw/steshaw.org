#!/usr/bin/env bash

set -eu

keep_alive() {
  while true; do
    sleep 600
    echo -e "\n\n\t\tI am alive\n\n"
  done
}

trap 'kill $(jobs -p)' EXIT

keep_alive&

source ~/.nix-profile/etc/profile.d/nix.sh
cabal2nix --shell . >shell.nix
nix-shell -I ~ --command 'cabal configure'

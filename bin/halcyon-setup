#!//usr/bin/env bash

set -eu

if [[ ! -d /app ]]; then
  sudo mkdir /app
  sudo chown ${USER} /app
fi

if [[ ! -d /app/halcyon ]]; then
  echo 'Installing halcyon...'
  git clone https://github.com/mietek/halcyon /app/halcyon
  source <(HALCYON_NO_SELF_UPDATE=1 /app/halcyon/halcyon paths)
  HALCYON_NO_SELF_UPDATE=1 /app/halcyon/halcyon install \
      --ghc-version=7.10.1 \
      --cabal-version=1.22.2.0 \
      --no-app
fi

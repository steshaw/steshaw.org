#!/bin/bash

set -eu

by="${1:-${USER}}"

./site build
cd _site
git add -A
if git diff-index --quiet HEAD; then
  echo No changes to commit
else
  git commit -m "Built by ${by} on $(date '+%d-%b-%Y %H:%M:%S %Z')"
  git push origin master
fi
